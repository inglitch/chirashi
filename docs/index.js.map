{"version":3,"file":"index.js","sources":["../node_modules/hyperapp/src/index.js","../src/icon.js","../src/jsonp_new.js","../src/index.js"],"sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","export default {\n  append: function(text, options) {\n    (document.getElementsByTagName(\"head\")[ 0 ] || document.documentElement).appendChild(this.linkElement(text, options))\n  },\n  linkElement: function(text, options) {\n    var link = document.createElement('link')\n    link.rel = 'apple-touch-icon'\n    link.href = this.dataURL(text, options)\n    return link\n  },\n  dataURL: function(text, options) {\n    options = options || {}\n    var size = 1 < options.size ? options.size | 0 : 256,\n        canvas = document.createElement('canvas'),\n        ctx = canvas.getContext('2d'),\n        width,\n        widest\n    canvas.width = canvas.height = size\n    ctx.font = options.font\n    width = /(\\d+)px/.exec(ctx.font)[ 1 ]\n    text = (text + '').split('\\n').map(function(e) { return { text: e, width: ctx.measureText(e).width } })\n    widest = text.reduce(function(p, c) { return (p.width || 0) < c.width ? c : p; }, {})\n    if (({ up: widest.width < size, down: size < widest.width, both: true })[ options.scale ]) {\n      width = size / text.length | 0\n      while (width--) {\n        ctx.font = ctx.font.replace(/\\d+px/, width + 'px')\n        if (ctx.measureText(widest.text).width < size) {\n          break\n        }\n      }\n    }\n    ctx.fillStyle = options.bgcolor || '#fff'\n    ctx.fillRect(0, 0, size, size)\n    ctx.fillStyle = options.color || '#000'\n    ctx.textAlign = 'center'\n    ctx.textBaseline = 'middle'\n    text.forEach(function(e, i, a) { ctx.fillText(e.text, size / 2, (i - (a.length - 1) / 2) * width + size / 2) })\n    return canvas.toDataURL()\n  }\n}\n","var jsonp_ = function(url, options) {\n  options = options || {}\n  var callbackName = options.callbackName || '_' + Math.random().toString(16).slice(-12)\n  var load = options.load\n  var error = options.error\n  var parent = document.documentElement\n  var script = document.createElement('script')\n  typeof load === 'function' && (\n    window[ callbackName ] = load,\n    script.onerror = script.onload = function(event) {\n      parent.removeChild(script)\n      delete window[ callbackName ]\n      event.type === 'error' && typeof error === 'function' && error(url)\n    },\n    //script.referrerPolicy = 'no-referrer',\n    script.src = url.replace(/=\\?/, '=' + callbackName),\n    parent.appendChild(script)\n  )\n}\n\nexport default function(url, options) {\n  return new Promise(function(resolve, reject) {\n    options = options || {}\n    options.load = function(json) {\n      resolve(json)\n    }\n    options.error = function(url) {\n      reject(url)\n    }\n    jsonp_(url, options)\n  })\n}\n","import { app, h } from 'hyperapp'\nimport data from './data'\nimport icon from './icon'\nimport jsonp from './jsonp_new'\n\nObject.defineProperty(document, 'referrer', { value: '' })\n\nconst replace = (text, keys) => text.replace(/{[^}]*}/g, match => keys[ match.slice(1, -1) ] || match)\n\nconst Main = ({ api, type, value }) => (\n  api === 0 ? (\n    (value || {}).error ?\n    <p>{(value || {}).error}</p> :\n    <ul>{[].concat((((value || {}).shop || {}).chirashis || {}).chirashi).map(({ title, iconUrl, pdfUrl, imgUrl, flashUrl }) => <li><a href={imgUrl || flashUrl || pdfUrl} target=\"_blank\"><img src={iconUrl} /><span>{title}</span></a></li>)}</ul>\n  ) :\n  api === 1 ? <iframe src={value} /> :\n  api === 2 ? <ul>{value.map(e => <li><a href={e} target=\"_blank\">{e}</a></li>)}</ul> :\n  ''\n)\n\ndata.title && icon.append(data.title, { scale: 'both' })\n\napp(\n  {\n    data,\n    data_: {}\n  },\n  {\n    current: value => ({ current: value }),\n    area: value => ({ area: value }),\n    type: value => ({ type: value }),\n    data_: {\n      get: ({ area, type, api, api_, name, ...rest }) => (state, actions) => {\n        actions[ api_.type ] && actions[ api_.type ]({ ...rest, ...api_, api })\n      },\n      iframe: ({ api, i, type, url, ...rest }) => ({\n        [ i ]: {\n          api,\n          type,\n          value: replace(url, rest)\n        }\n      }),\n      jsonp: ({ api, i, type, url, ...rest }) => (state, actions) => {\n        jsonp(replace(url, rest), {\n          callbackName: \"JSONCallbackJscript2IdShufoo0\" + Date.now()\n        }).then(json => actions.set({\n          [ i ]: {\n            api,\n            type,\n            value: json\n          }\n        }))\n      },\n      urls: ({ api, i, type, urls }) => ({\n        [ i ]: {\n          api,\n          type,\n          value: [].concat(urls)\n        }\n      }),\n      set: value => value\n    }\n  },\n  (state, actions) => (\n    document.title = [\n      state.data.title,\n      (state.data.shop[ state.current ] || {}).name || ''\n    ].filter(e => e).join(' > '),\n    <div data-current={state.current}>\n      <nav>\n        <ul class=\"area\">\n          <li>\n            <input id=\"area\" name=\"area\" type=\"radio\" onclick={() => actions.area(void 0)} checked={isNaN(state.area)} />\n            <label for=\"area\">{state.data.all}</label>\n          </li>\n          {state.data.area.map((e, i) => (\n            <li>\n              <input id={'area' + i} name=\"area\" type=\"radio\" onclick={() => actions.area(i)} checked={state.area === i} />\n              <label for={'area' + i}>{e}</label>\n            </li>\n          ))}\n        </ul>\n        <ul class=\"type\">\n          <li>\n            <input id=\"type\" name=\"type\" type=\"radio\" onclick={() => actions.type(void 0)} checked={isNaN(state.type)} />\n            <label for=\"type\" data-length={\n              isNaN(state.area) ?\n              state.data.shop.length :\n              state.data.shop.filter(e => state.area === e.area).length\n            }>{state.data.all}</label>\n          </li>\n          {state.data.type.map((e, i) => (\n            <li>\n              <input id={'type' + i} name=\"type\" type=\"radio\" onclick={() => actions.type(i)} checked={state.type === i} />\n              <label for={'type' + i} data-length={\n                isNaN(state.area) ?\n                state.data.shop.filter(e => e.type === i).length :\n                state.data.shop.filter(e => state.area === e.area && e.type === i).length\n              }>{e}</label>\n            </li>\n          ))}\n          <li>\n            <input id=\"type-1\" name=\"type\" type=\"radio\" onclick={() => actions.type(-1)} checked={state.type === -1} />\n            <label for=\"type-1\" data-length={\n              isNaN(state.area) ?\n              state.data.shop.filter(e => e.type === -1).length :\n              state.data.shop.filter(e => state.area === e.area && e.type === -1).length\n            }>{state.data.other}</label>\n          </li>\n        </ul>\n        <ul class=\"shop\">\n          {state.data.shop.map((e, i) => (\n            (isNaN(state.area) || state.area === e.area) &&\n            (isNaN(state.type) || state.type === e.type) &&\n            <li><button type=\"button\" onclick={() => (\n              actions.current(i),\n              actions.data_.get({ ...e, i, api_: state.data.api[ e.api ] })\n            )} disabled={state.current === i} data-area={e.area} data-type={e.type}>{e.name}</button></li>\n          ))}\n        </ul>\n      </nav>\n      <main>\n        <h1><button onclick={() => actions.current(void 0)}>&lt;</button>{(state.data.shop[ state.current ] || {}).name || ''}</h1>\n        {!isNaN(state.current) && <Main {...state.data_[ state.current ] || {}} />}\n      </main>\n    </div>\n  ),\n  document.body\n)\n"],"names":["h","name","attributes","rest","children","length","arguments","push","node","pop","nodeName","key","append","text","options","document","getElementsByTagName","documentElement","appendChild","this","linkElement","link","createElement","rel","href","dataURL","width","widest","size","canvas","ctx","getContext","height","font","exec","up","split","map","e","measureText","reduce","p","c","down","both","scale","replace","fillStyle","bgcolor","fillRect","color","textAlign","textBaseline","forEach","i","a","fillText","toDataURL","url","Promise","resolve","reject","callbackName","load","error","parent","script","json","Math","random","toString","slice","window","onerror","onload","event","removeChild","type","src","Object","defineProperty","value","const","keys","match","Main","ref","api","concat","shop","chirashis","chirashi","imgUrl","flashUrl","pdfUrl","target","iconUrl","title","data","icon","app","state","actions","view","container","skipRender","rootElement","oldNode","recycleElement","element","toLowerCase","call","childNodes","nodeType","nodeValue","lifecycle","isRecycling","globalState","clone","wiredActions","wireStateToActions","path","action","result","getPartialState","then","scheduleRender","setPartialState","resolveNode","render","patch","isSvg","newElement","removeElement","updateElement","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","getKey","k","newKey","keyedNode","setTimeout","source","out","eventListener","currentTarget","events","updateAttribute","oldValue","style","cssText","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","createTextNode","createElementNS","oncreate","oldAttributes","cb","onupdate","done","removeChildren","ondestroy","onremove","data_","current","area","get","api_","iframe","jsonp","Date","now","set","urls","filter","join","data-current","class","id","onclick","checked","isNaN","for","all","data-length","other","disabled","data-area","data-type","body"],"mappings":"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"}