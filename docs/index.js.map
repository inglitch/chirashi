{"version":3,"file":"index.js","sources":["../node_modules/hyperapp/src/index.js","../src/jsonp_new.js","../src/index.js","../src/icon.js"],"sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","var jsonp_ = function(url, options) {\n  options = options || {}\n  var callbackName = options.callbackName || '_' + Math.random().toString(16).slice(-12)\n  var load = options.load\n  var error = options.error\n  var parent = document.documentElement\n  var script = document.createElement('script')\n  typeof load === 'function' && (\n    window[ callbackName ] = load,\n    script.onerror = script.onload = function(event) {\n      parent.removeChild(script)\n      delete window[ callbackName ]\n      event.type === 'error' && typeof error === 'function' && error(url)\n    },\n    script.src = url.replace(/=\\?/, '=' + callbackName),\n    parent.appendChild(script)\n  )\n}\n\nexport default function(url, options) {\n  return new Promise(function(resolve, reject) {\n    options = options || {}\n    options.load = function(json) {\n      resolve(json)\n    }\n    options.error = function(url) {\n      reject(url)\n    }\n    jsonp_(url, options)\n  })\n}\n","import { app, h } from 'hyperapp'\nimport data from './data'\nimport icon from './icon'\nimport jsonp from './jsonp_new'\n\nconst replace = (text, keys) => text.replace(/{[^}]*}/g, match => keys[ match.slice(1, -1) ] || match)\n\nconst Main = ({ api, type, value }) => (\n  console.log({ api, type, value }),\n  api === 0 ? <ul>{[].concat((((value || {}).shop || {}).chirashis || {}).chirashi).map(({ title, iconUrl, pdfUrl, imgUrl, flashUrl }) => <li><a href={imgUrl || flashUrl || pdfUrl} target=\"_blank\"><img src={iconUrl} /><span>{title}</span></a></li>)}</ul> :\n  api === 1 ? <iframe src={value} /> :\n  api === 2 ? <ul>{value.map(e => <li><a href={e} target=\"_blank\">{e}</a></li>)}</ul> :\n  ''\n)\n\ndata.title && icon.append(data.title, { scale: 'both' })\n\napp(\n  {\n    data,\n    data_: {}\n  },\n  {\n    current: value => ({ current: value }),\n    area: value => ({ area: value }),\n    type: value => ({ type: value }),\n    data_: {\n      get: ({ area, type, api, api_, name, ...rest }) => (state, actions) => {\n        actions[ api_.type ] && actions[ api_.type ]({ ...rest, ...api_, api })\n      },\n      iframe: ({ api, i, type, url, ...rest }) => ({\n        [ i ]: {\n          api,\n          type,\n          value: replace(url, rest)\n        }\n      }),\n      jsonp: ({ api, i, type, url, ...rest }) => (state, actions) => {\n        jsonp(replace(url, rest), {\n          callbackName: \"JSONCallbackJscript2IdShufoo0\" + Date.now()\n        }).then(json => actions.set({\n          [ i ]: {\n            api,\n            type,\n            value: json\n          }\n        }))\n      },\n      urls: ({ api, i, type, urls }) => ({\n        [ i ]: {\n          api,\n          type,\n          value: [].concat(urls)\n        }\n      }),\n      set: value => value\n    }\n  },\n  (state, actions) => (\n    document.title = [\n      state.data.title,\n      (state.data.shop[ state.current ] || {}).name || ''\n    ].filter(e => e).join(' > '),\n    <div data-current={state.current}>\n      <nav>\n        <ul class=\"area\">\n          <li>\n            <input id=\"area\" name=\"area\" type=\"radio\" onclick={() => actions.area(void 0)} checked={isNaN(state.area)} />\n            <label for=\"area\">{state.data.all}</label>\n          </li>\n          {state.data.area.map((e, i) => (\n            <li>\n              <input id={'area' + i} name=\"area\" type=\"radio\" onclick={() => actions.area(i)} checked={state.area === i} />\n              <label for={'area' + i}>{e}</label>\n            </li>\n          ))}\n        </ul>\n        <ul class=\"type\">\n          <li>\n            <input id=\"type\" name=\"type\" type=\"radio\" onclick={() => actions.type(void 0)} checked={isNaN(state.type)} />\n            <label for=\"type\" data-length={\n              isNaN(state.area) ?\n              state.data.shop.length :\n              state.data.shop.filter(e => state.area === e.area).length\n            }>{state.data.all}</label>\n          </li>\n          {state.data.type.map((e, i) => (\n            <li>\n              <input id={'type' + i} name=\"type\" type=\"radio\" onclick={() => actions.type(i)} checked={state.type === i} />\n              <label for={'type' + i} data-length={\n                isNaN(state.area) ?\n                state.data.shop.filter(e => e.type === i).length :\n                state.data.shop.filter(e => state.area === e.area && e.type === i).length\n              }>{e}</label>\n            </li>\n          ))}\n          <li>\n            <input id=\"type-1\" name=\"type\" type=\"radio\" onclick={() => actions.type(-1)} checked={state.type === -1} />\n            <label for=\"type-1\" data-length={\n              isNaN(state.area) ?\n              state.data.shop.filter(e => e.type === -1).length :\n              state.data.shop.filter(e => state.area === e.area && e.type === -1).length\n            }>{state.data.other}</label>\n          </li>\n        </ul>\n        <ul class=\"shop\">\n          {state.data.shop.map((e, i) => (\n            (isNaN(state.area) || state.area === e.area) &&\n            (isNaN(state.type) || state.type === e.type) &&\n            <li><button type=\"button\" onclick={() => (\n              actions.current(i),\n              actions.data_.get({ ...e, i, api_: state.data.api[ e.api ] })\n            )} disabled={state.current === i} data-area={e.area} data-type={e.type}>{e.name}</button></li>\n          ))}\n        </ul>\n      </nav>\n      <main>\n        <h1><button onclick={() => actions.current(void 0)}>&lt;</button>{(state.data.shop[ state.current ] || {}).name || ''}</h1>\n        {!isNaN(state.current) && <Main {...state.data_[ state.current ] || {}} />}\n      </main>\n    </div>\n  ),\n  document.body\n)\n","export default {\n  append: function(text, options) {\n    (document.getElementsByTagName(\"head\")[ 0 ] || document.documentElement).appendChild(this.linkElement(text, options))\n  },\n  linkElement: function(text, options) {\n    var link = document.createElement('link')\n    link.rel = 'apple-touch-icon'\n    link.href = this.dataURL(text, options)\n    return link\n  },\n  dataURL: function(text, options) {\n    options = options || {}\n    var size = 1 < options.size ? options.size | 0 : 256,\n        canvas = document.createElement('canvas'),\n        ctx = canvas.getContext('2d'),\n        width,\n        widest\n    canvas.width = canvas.height = size\n    ctx.font = options.font\n    width = /(\\d+)px/.exec(ctx.font)[ 1 ]\n    text = (text + '').split('\\n').map(function(e) { return { text: e, width: ctx.measureText(e).width } })\n    widest = text.reduce(function(p, c) { return (p.width || 0) < c.width ? c : p; }, {})\n    if (({ up: widest.width < size, down: size < widest.width, both: true })[ options.scale ]) {\n      width = size / text.length | 0\n      while (width--) {\n        ctx.font = ctx.font.replace(/\\d+px/, width + 'px')\n        if (ctx.measureText(widest.text).width < size) {\n          break\n        }\n      }\n    }\n    ctx.fillStyle = options.bgcolor || '#fff'\n    ctx.fillRect(0, 0, size, size)\n    ctx.fillStyle = options.color || '#000'\n    ctx.textAlign = 'center'\n    ctx.textBaseline = 'middle'\n    text.forEach(function(e, i, a) { ctx.fillText(e.text, size / 2, (i - (a.length - 1) / 2) * width + size / 2) })\n    return canvas.toDataURL()\n  }\n}\n"],"names":["h","name","attributes","rest","children","length","arguments","push","node","pop","nodeName","key","url","options","Promise","resolve","reject","callbackName","load","error","parent","script","json","Math","random","toString","slice","document","documentElement","createElement","window","onerror","onload","event","removeChild","type","src","replace","appendChild","const","text","keys","match","Main","ref","console","log","api","value","concat","shop","chirashis","chirashi","map","href","imgUrl","flashUrl","pdfUrl","target","iconUrl","title","e","data","append","getElementsByTagName","this","linkElement","link","rel","dataURL","width","widest","size","canvas","ctx","getContext","height","font","exec","up","split","measureText","reduce","p","c","down","both","scale","fillStyle","bgcolor","fillRect","color","textAlign","textBaseline","forEach","i","a","fillText","toDataURL","app","state","actions","view","container","skipRender","rootElement","oldNode","recycleElement","element","toLowerCase","call","childNodes","nodeType","nodeValue","lifecycle","isRecycling","globalState","clone","wiredActions","wireStateToActions","path","action","result","getPartialState","then","scheduleRender","setPartialState","resolveNode","render","patch","isSvg","newElement","removeElement","updateElement","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","getKey","k","newKey","keyedNode","setTimeout","source","out","eventListener","currentTarget","events","updateAttribute","oldValue","style","cssText","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","createTextNode","createElementNS","oncreate","oldAttributes","cb","onupdate","done","removeChildren","ondestroy","onremove","data_","current","area","get","api_","Object","iframe","jsonp","Date","now","set","urls","filter","join","data-current","class","id","onclick","checked","isNaN","for","all","data-length","other","disabled","data-area","data-type","body"],"mappings":"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"}