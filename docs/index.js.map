{"version":3,"file":"index.js","sources":["../node_modules/hyperapp/src/index.js","../src/jsonp.js","../src/index.js"],"sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","var jsonp_ = function(url, options) {\n  options = options || {}\n  var callbackName = options.callbackName || '_' + Math.random().toString(16).slice(-12)\n  var load = options.load\n  var error = options.error\n  var parent = document.documentElement\n  var script = document.createElement('script')\n  typeof load === 'function' && (\n    window[ callbackName ] = load,\n    script.onerror = script.onload = function(event) {\n      parent.removeChild(script)\n      delete window[ callbackName ]\n      event.type === 'error' && typeof error === 'function' && error(url)\n    },\n    //script.referrerPolicy = 'no-referrer',\n    script.src = url.replace(/=\\?/, '=' + callbackName),\n    parent.appendChild(script)\n  )\n}\n\nexport default function(url, options) {\n  return new Promise(function(resolve, reject) {\n    options = options || {}\n    options.load = function(json) {\n      resolve(json)\n    }\n    options.error = function(url) {\n      reject(url)\n    }\n    jsonp_(url, options)\n  })\n}\n","import { app, h } from 'hyperapp'\nimport jsonp from './jsonp'\n\nconst replace = (text, keys) => text.replace(/{[^}]*}/g, match => keys[ match.slice(1, -1) ] || match)\n\nconst Main = ({ api, type, value }) => (\n  api === 0 ? (\n    (value || {}).error ?\n    <p>{(value || {}).error}</p> :\n    <ul>{[].concat((((value || {}).shop || {}).chirashis || {}).chirashi).map(({ title, iconUrl, pdfUrl, imgUrl, flashUrl }) => <li><a href={imgUrl || flashUrl || pdfUrl} target=\"_blank\"><img src={iconUrl} /><span>{title}</span></a></li>)}</ul>\n  ) :\n  api === 1 ? <iframe src={value} /> :\n  api === 2 ? <ul>{value.map(e => <li><a href={e} target=\"_blank\">{e}</a></li>)}</ul> :\n  ''\n)\n\napp(\n  {\n    data: {},\n    data_: {}\n  },\n  {\n    set: value => value,\n    init: () => (state, actions) => fetch('data.json').then(response => response.json()).then(json => actions.set({ data: json })),\n    current: value => ({ current: value }),\n    area: value => ({ area: value }),\n    type: value => ({ type: value }),\n    data_: {\n      set: value => value,\n      get: ({ area, type, api, api_, name, ...rest }) => (state, actions) => {\n        actions[ api_.type ] && actions[ api_.type ]({ ...rest, ...api_, api })\n      },\n      iframe: ({ api, i, type, url, ...rest }) => ({\n        [ i ]: {\n          api,\n          type,\n          value: replace(url, rest)\n        }\n      }),\n      jsonp: ({ api, i, type, url, ...rest }) => (state, actions) => {\n        jsonp(replace(url, rest), {\n          callbackName: \"JSONCallbackJscript2IdShufoo0\" + Date.now()\n        }).then(json => actions.set({\n          [ i ]: {\n            api,\n            type,\n            value: json\n          }\n        }))\n      },\n      urls: ({ api, i, type, urls }) => ({\n        [ i ]: {\n          api,\n          type,\n          value: [].concat(urls)\n        }\n      })\n    }\n  },\n  (state, actions) => {\n    const dataShop = [].concat(state.data.shop || [])\n    document.title = [\n      state.data.title,\n      (dataShop[ state.current ] || {}).name || ''\n    ].filter(e => e).join(' > ')\n    return (\n      <div data-current={state.current}>\n        <nav>\n          <ul class=\"area\">\n            <li>\n              <input id=\"area\" name=\"area\" type=\"radio\" onclick={() => actions.area(void 0)} checked={isNaN(state.area)} />\n              <label for=\"area\">{state.data.all || 'All'}</label>\n            </li>\n            {[].concat(state.data.area || []).map((e, i) => (\n              <li>\n                <input id={'area' + i} name=\"area\" type=\"radio\" onclick={() => actions.area(i)} checked={state.area === i} />\n                <label for={'area' + i}>{e}</label>\n              </li>\n            ))}\n          </ul>\n          <ul class=\"type\">\n            <li>\n              <input id=\"type\" name=\"type\" type=\"radio\" onclick={() => actions.type(void 0)} checked={isNaN(state.type)} />\n              <label for=\"type\" data-length={\n                isNaN(state.area) ?\n                dataShop.length :\n                dataShop.filter(e => state.area === e.area).length\n              }>{state.data.all || 'All'}</label>\n            </li>\n            {[].concat(state.data.type || []).map((e, i) => (\n              <li>\n                <input id={'type' + i} name=\"type\" type=\"radio\" onclick={() => actions.type(i)} checked={state.type === i} />\n                <label for={'type' + i} data-length={\n                  isNaN(state.area) ?\n                  dataShop.filter(e => e.type === i).length :\n                  dataShop.filter(e => state.area === e.area && e.type === i).length\n                }>{e}</label>\n              </li>\n            ))}\n            <li>\n              <input id=\"type-1\" name=\"type\" type=\"radio\" onclick={() => actions.type(-1)} checked={state.type === -1} />\n              <label for=\"type-1\" data-length={\n                isNaN(state.area) ?\n                dataShop.filter(e => e.type === -1).length :\n                dataShop.filter(e => state.area === e.area && e.type === -1).length\n              }>{state.data.other || 'Other'}</label>\n            </li>\n          </ul>\n          <ul class=\"shop\">\n            {dataShop.map((e, i) => (\n              (isNaN(state.area) || state.area === e.area) &&\n              (isNaN(state.type) || state.type === e.type) &&\n              <li><button type=\"button\" onclick={() => (\n                actions.current(i),\n                actions.data_.get({ ...e, i, api_: [].concat(state.data.api || [])[ e.api ] })\n              )} disabled={state.current === i} data-area={e.area} data-type={e.type}>{e.name}</button></li>\n            ))}\n          </ul>\n        </nav>\n        <main>\n          <h1><button onclick={() => actions.current(void 0)}>&lt;</button>{(dataShop[ state.current ] || {}).name || ''}</h1>\n          {!isNaN(state.current) && <Main {...state.data_[ state.current ] || {}} />}\n        </main>\n      </div>\n    )\n  },\n  document.body\n).init()\n"],"names":["h","name","attributes","rest","children","length","arguments","push","node","pop","nodeName","key","url","options","Promise","resolve","reject","callbackName","load","error","parent","script","json","Math","random","toString","slice","document","documentElement","createElement","window","onerror","onload","event","removeChild","type","src","replace","appendChild","const","text","keys","match","Main","ref","api","value","concat","shop","chirashis","chirashi","map","href","imgUrl","flashUrl","pdfUrl","target","iconUrl","title","e","app","state","actions","view","container","skipRender","rootElement","oldNode","recycleElement","element","toLowerCase","call","childNodes","nodeType","nodeValue","lifecycle","isRecycling","globalState","clone","wiredActions","wireStateToActions","path","action","data","result","getPartialState","then","scheduleRender","setPartialState","resolveNode","render","patch","isSvg","newElement","removeElement","updateElement","oldKeyed","newKeyed","oldElements","oldChildren","i","oldKey","getKey","k","newKey","keyedNode","setTimeout","source","out","eventListener","currentTarget","events","updateAttribute","oldValue","style","cssText","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","createTextNode","createElementNS","oncreate","oldAttributes","cb","onupdate","done","removeChildren","ondestroy","onremove","data_","set","init","fetch","response","current","area","get","api_","Object","iframe","jsonp","Date","now","urls","dataShop","filter","join","data-current","class","id","onclick","checked","isNaN","for","all","data-length","other","disabled","data-area","data-type","body"],"mappings":"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"}